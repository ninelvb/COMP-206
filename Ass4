#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void FindRecord(char *filename, char *name, char record[]){
  input_file = fopen(filename, "rt");
  char brouillon[1000];
  if (input_file == NULL){
    exit(1);
  }
  strcat(brouillon, filename);
  while(fgets(brouillon, 1000, input_file) != NULL){
    if(strstr(brouillon, name) != NULL){ 
      for(int i=0; i<1000; i++){
        if(brouillon[i] == *(name+i)){
          while(brouillon[i] != "\0"){
            record[i] = brouillon[i];
          }
        }
      }
    }
    else{
      printf("There is no record in the CSV file that belongs to name: %s \n", name);
      return 1;
    }
  }
  printf("\n");
  fclose(input_file);
  return 0;
}



void Replace(char *name, char *newname, char record[]){
  #record points to the first cell of the array
  record = &newname;
  #now record points to the adress of newname
  #printf("%s", *record) #prints the newname
  return 0;
}



void SaveRecord(char *filename, char *name, char record[]){
  input_file = fopen(filename, "w+");
  char copy[1000];
  strcat(copy, filename);
  while(fgets(copy, 1000, input_file) != NULL){
    if(strstr(copy, name) != NULL){ 
      for(int i=0; i<1000; i++){
        while(copy[i] != "\0"){
          if(copy[i] == record[i]){
            j=i;
          }
          if(copy[i] = "\0"){
            k=i;
          }
          i++;
        }
      }
    }
  }
  char filecopy[1000];
  for(int i=0; i<1000; i++){
    while(i<j){
      filecopy[i]=copy[i];
    }
  }
  strcat(filecopy, record);
    }
  }
  for(int i=0; i<1000; i++){
    while(i>j){
      filecopy[i]=copy[i];
    }
  }
  fputs(filecopy, input_file);
  fclose(input_file);
  return 0;
}
    

int main(){
        char record[1000];
        char *newname;
        char *filename
        char * filename = "phonebook.csv";
        printf(Enter the name you wish to replace: ");
        scanf("%s", &name]; #or: fgets(&name, 1000, stdin);
        FindRecord(filename, name, record);
        printf(Enter the new name: ");
        scanf("%s", &newname]; #or: fgets(&newname, 1000, stdin);
        Replace(name, newname, record);
        SaveRecord(filename, name, record);
        return 0;
}
